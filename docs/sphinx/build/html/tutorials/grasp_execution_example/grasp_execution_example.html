

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Grasp Execution Example &mdash; EMD alpha documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Grasp Planner Example" href="../grasp_planner_example/grasp_planner_example.html" />
    <link rel="prev" title="Adding a camera to the scene" href="../workcell_builder_example/workcell_builder_example_camera.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> EMD
          

          
            
            <img src="../../_static/emd_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">About</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/common_concepts.html">Common Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/download_instructions.html">Download Instructions</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../emd_example.html">Step-By-Step Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../workcell_builder_example/workcell_builder_example.html">Workcell Builder Example</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Grasp Execution Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#grasp-execution-configuration">Grasp execution configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#grasp-execution-launch-file">Grasp execution launch file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scene-urdf-file">Scene URDF File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grasp-execution-node-file">Grasp execution node file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-full-pipeline">Running full pipeline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#terminal-1-grasp-execution">Terminal 1: Grasp Execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#terminal-2-grasp-planner">Terminal 2: Grasp Planner</a></li>
<li class="toctree-l4"><a class="reference internal" href="#terminal-3-perception-example-rosbag">Terminal 3: Perception example rosbag</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../grasp_planner_example/grasp_planner_example.html">Grasp Planner Example</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Individual Package Details</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../emd_packages/workcell_builder/workcell_builder.html">Workcell Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emd_packages/grasp_execution/grasp_execution_demo.html">Grasp Execution Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../emd_packages/grasp_planner/grasp_planner.html">Grasp Planner</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EMD</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../emd_example.html">Step-By-Step Tutorials</a> &raquo;</li>
        
      <li>Grasp Execution Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/tutorials/grasp_execution_example/grasp_execution_example.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="grasp-execution-example">
<span id="id1"></span><h1>Grasp Execution Example<a class="headerlink" href="#grasp-execution-example" title="Permalink to this headline">¶</a></h1>
<p>Currently the grasp execution portion of the package is under heavy development, but for now there is a basic example to execute the grasp plan.</p>
<p>In the example we will use the perception ROS2 bag as the input.</p>
<div class="section" id="grasp-execution-configuration">
<h2>Grasp execution configuration<a class="headerlink" href="#grasp-execution-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="grasp-execution-launch-file">
<h3>Grasp execution launch file<a class="headerlink" href="#grasp-execution-launch-file" title="Permalink to this headline">¶</a></h3>
<p>First we need to configure the grasp execution launch file. In <code class="code docutils literal notranslate"><span class="pre">/workcell_ws/src/easy_manipulation_deployment/grasp_execution/launch/grasp_execution.launch.py</span></code> , make sure you define the correct scene package for the grasp execution, and the correct base link of the robot.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">scene_pkg</span> <span class="o">=</span> <span class="s1">&#39;new_scene&#39;</span>
<span class="nv">robot_base_link</span> <span class="o">=</span> <span class="s1">&#39;base_link&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="scene-urdf-file">
<h3>Scene URDF File<a class="headerlink" href="#scene-urdf-file" title="Permalink to this headline">¶</a></h3>
<p>In <code class="code docutils literal notranslate"><span class="pre">/workcell_ws/src/scenes/new_scene/urdf/scene.urdf.xacro</span></code>, add the following lines <em>before</em> the <code class="code docutils literal notranslate"><span class="pre">robot</span></code> tag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;link <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;ee_palm&quot;</span> /&gt;
&lt;joint <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;base_to_palm&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;fixed&quot;</span>&gt;
   &lt;parent <span class="nv">link</span><span class="o">=</span><span class="s2">&quot;tool0&quot;</span>/&gt;
   &lt;child <span class="nv">link</span><span class="o">=</span><span class="s2">&quot;ee_palm&quot;</span>/&gt;
   &lt;origin <span class="nv">xyz</span><span class="o">=</span><span class="s2">&quot;0 0 0.09&quot;</span> <span class="nv">rpy</span><span class="o">=</span><span class="s2">&quot;0 0 0&quot;</span>/&gt;
&lt;/joint&gt;
</pre></div>
</div>
<p>This link, <code class="code docutils literal notranslate"><span class="pre">ee_palm</span></code> represents the point of contact with respect to the grasp object.</p>
<a class="reference internal image-reference" href="../../_images/example_ee_palm.png"><img alt="../../_images/example_ee_palm.png" class="align-center" src="../../_images/example_ee_palm.png" style="width: 789.75px; height: 699.0px;" /></a>
</div>
<div class="section" id="grasp-execution-node-file">
<h3>Grasp execution node file<a class="headerlink" href="#grasp-execution-node-file" title="Permalink to this headline">¶</a></h3>
<p>In <code class="code docutils literal notranslate"><span class="pre">/workcell_ws/src/easy_manipulation_deployment/grasp_execution/src/grasp_execution_node.cpp</span></code>,edit the following line to reflect the link of the end effector that will represent the point of contact with respect to the grasp object. In this case, it will be <code class="code docutils literal notranslate"><span class="pre">ee_palm</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>demo.init<span class="o">(</span><span class="s2">&quot;manipulator&quot;</span>, <span class="s2">&quot;ee_palm&quot;</span><span class="o">)</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="running-full-pipeline">
<h2>Running full pipeline<a class="headerlink" href="#running-full-pipeline" title="Permalink to this headline">¶</a></h2>
<p>After making the changes, remember to build the workspace. In <code class="code docutils literal notranslate"><span class="pre">/workcell</span></code>,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon build
<span class="nb">source</span> install/setup.bash
</pre></div>
</div>
<p>The next part requires three different terminals.</p>
<div class="section" id="terminal-1-grasp-execution">
<h3>Terminal 1: Grasp Execution<a class="headerlink" href="#terminal-1-grasp-execution" title="Permalink to this headline">¶</a></h3>
<p>This terminal runs the manipulation workspace simulation. First, source all relevant repositories. In <code class="code docutils literal notranslate"><span class="pre">/workcell</span></code>,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /opt/ros/foxy/setup.bash
<span class="nb">source</span> ~/moveit2_ws/install/setup.bash
<span class="nb">source</span> install/setup.bash
</pre></div>
</div>
<p>Next, launch the grasp execution component.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 launch grasp_execution grasp_execution_launch.py
</pre></div>
</div>
<p>You should then see rviz launch and the scene.</p>
<img alt="../../_images/example_execution_launched.png" src="../../_images/example_execution_launched.png" />
</div>
<div class="section" id="terminal-2-grasp-planner">
<h3>Terminal 2: Grasp Planner<a class="headerlink" href="#terminal-2-grasp-planner" title="Permalink to this headline">¶</a></h3>
<p>This terminal runs the grasp_planner. First, source all relevant repositories. In <code class="code docutils literal notranslate"><span class="pre">/workcell</span></code>,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /opt/ros/foxy/setup.bash
<span class="nb">source</span> ~/moveit2_ws/install/setup.bash
<span class="nb">source</span> install/setup.bash
</pre></div>
</div>
<p>Next, launch the grasp planner.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run grasp_planning grasp_planning_node
</pre></div>
</div>
<p>You should then see the following</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>easy_manipulation_deployment<span class="o">][</span>Grasp Planner<span class="o">]</span> Waiting <span class="k">for</span> topic....
</pre></div>
</div>
</div>
<div class="section" id="terminal-3-perception-example-rosbag">
<h3>Terminal 3: Perception example rosbag<a class="headerlink" href="#terminal-3-perception-example-rosbag" title="Permalink to this headline">¶</a></h3>
<p>This terminal runs the perception example. First, source all relevant repositories. In <code class="code docutils literal notranslate"><span class="pre">/workcell</span></code>,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /opt/ros/foxy/setup.bash
<span class="nb">source</span> ~/moveit2_ws/install/setup.bash
<span class="nb">source</span> install/setup.bash
</pre></div>
</div>
<p>Next, run the rosbag</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 bag play src/easy_manipulation_deployment/grasp_planner/rosbag/perception_example/rosbag/rosbag2_2020_09_25-15_54_55_0.db3
</pre></div>
</div>
<p>You should then see the following</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1605754174</span>.300681975<span class="o">]</span> <span class="o">[</span>rosbag2_storage<span class="o">]</span>: Opened database <span class="s1">&#39;src/easy_manipulation_deployment/grasp_planner/rosbag/perception_example/rosbag/rosbag2_2020_09_25-15_54_55_0.db3&#39;</span> <span class="k">for</span> READ_ONLY.
</pre></div>
</div>
<p>Ideally, if all components run in sequence, you should then see the manipulator simulation move in Rviz. The object will be picked up and placed at a drop off location before going back to the home position.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../grasp_planner_example/grasp_planner_example.html" class="btn btn-neutral float-right" title="Grasp Planner Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../workcell_builder_example/workcell_builder_example_camera.html" class="btn btn-neutral float-left" title="Adding a camera to the scene" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Glenn Tan.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>